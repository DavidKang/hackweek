%li.media
  = link_to user_path(comment.commenter), :class => 'pull-left' do
    = image_tag(comment.commenter.gravatar_url(:size => "40"), class: "media-object img-rounded", alt: comment.commenter.name, title: comment.commenter.name)
  .media-body
    %h6.media-heading
      = time_ago_in_words(comment.created_at)
      ago by
      = link_to user_path(comment.commenter) do
        = comment.commenter.name
      |
      = link_to 'Reply', '#', "data-toggle" => "modal", 'data-target' => "#replyModal_#{comment.id}"
      .modal.fade{id: "replyModal_#{comment.id}","aria-labelledby" => "replyModalLabel", role: "dialog", tabindex: "-1"}
        .modal-dialog{role: "document"}
          .modal-content
            .modal-header
              %button.close{"aria-label" => "Close", "data-dismiss" => "modal", type: "button"}
                %span{"aria-hidden" => "true"} Ã—
              %h2#replyModalLabel.modal-title{ style: 'text-align: center'} Reply to : #{comment.commenter.name}
            .modal-body
              %h4
                :markdown
                  #{ emojify comment.text }
              %hr
              = render partial: 'comments/form', locals: { comment: @new_comment, parent: comment }
    %p
      :markdown
        #{ emojify comment.text }
    - if !comment.comments.empty?
      %ul.media-list
        = render :partial => 'comments/comment', :collection => comment.comments, object: comment
